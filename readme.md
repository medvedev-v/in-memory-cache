# In-Memory Cache

## Основные фичи

### Синхронизация
Используется sync.RWMutex для обеспечения потокобезопасности

Чтение: множественный одновременный доступ (RLock)

Запись: эксклюзивный доступ (Lock)

### Фоновая очистка
Запускается отдельная горутина при создании кэша

Периодически проверяет и удаляет просроченные записи с помощью горутины очистки

Интервал очистки и размер кеша указывается в файле config.yaml

### Ограничение размера
При достижении максимального размера при попытке записи проиходит внеплановая очистка записей

Очистка реализована при помощи дополнительной структуры container.heap

### Формат TTL
Параметр TTL (time-to-live) поддерживает следующие форматы:

300ms - 300 миллисекунд

2s    - 2 секунды

5m    - 5 минут

1h    - 1 час

## Требования
Go 1.23.5 или выше

## Установка и запуск

### Клонируйте репозиторий и подтяните зависимости:
```console 
git clone https://github.com/medvedev-v/in-memory-cache
cd in-memory-cache
go get
 ```

### Запуск:
```console 
go run main.go
 ```

### Тесты:
```console 
go test ./test/cache/ -v
 ```

### Использование:
```text
set <key> <value> <ttl>    - установить значение
get <key>                  - получить значение
delete <key>               - удалить значение
keys                       - показать все ключи
size                       - размер кеша
cleanup                    - принудителььная очистка
exit                       - выйти из приложения
```

### Примеры:
```text
set vladivostok 2000 5m    - установить int значение на 5 минут
set chita city 1h          - установить string значение на 1 час
set samara true 30m        - установить bool значение на 30 минут
get samara                 - вернуть значение по ключу samara
delete vladivostok         - удалить значение по ключу vladivostok
```
